!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Darkflex=t():e.Darkflex=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=e.title,n=e.description,o=void 0===n?"":n,r=e.run,i=e.onSelect,s=e.onDeselect;this.title=t,this.description=o,this._run=r,this.onSelect=i,this.onDeselect=s}return e.prototype.run=function(){if("function"!=typeof this._run)throw new Error("No run method provided.");this._run()},e.prototype.isAvailable=function(){return!0},e.prototype.matches=function(e){var t=this.title.toLowerCase(),n=this.description.toLowerCase(),o=e.toLowerCase().split("").join(".*");return new RegExp(o).test(t)?10:new RegExp(o).test(n)?5:0},e}(),r=[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement],i=function(){function e(){var t=this;this.inputSubscribers=[],this.openSubscribers=[],this.runSubscribers=[],this.selectSubscribers=[],this.menuElement=e.createMenuElement(),this.inputElement=e.createInputElement(),this.groupsUlElement=e.createGroupsUlElement(),this.menuElement.appendChild(this.inputElement);var n=document.createElement("div");n.classList.add("darkflex__results"),n.appendChild(this.groupsUlElement),this.menuElement.appendChild(n),document.body.appendChild(this.menuElement);var o;this.inputElement.addEventListener("keydown",function(e){return"Enter"===e.key?void t.emitRun():"ArrowUp"===e.key?void c.selectPrevFilteredCommand():"ArrowDown"===e.key?void c.selectNextFilteredCommand():void setTimeout(function(){var e=t.inputElement.value;if(e!==o){o=e;for(var n=0,r=t.inputSubscribers;n<r.length;n++){(0,r[n])(e)}}},0)})}return e.createMenuElement=function(){var e=document.createElement("div");return e.classList.add("darkflex"),e.tabIndex=1,e},e.createInputElement=function(){var e=document.createElement("input");return e.classList.add("darkflex__input"),e},e.createGroupsUlElement=function(){var e=document.createElement("ul");return e.classList.add("darkflex__groups"),e},e.createGroupLiElement=function(e){var t=document.createElement("li");return t.classList.add("darkflex__group"),t.innerHTML='<span class="darkflex__group-title">'+e.title+"</span>",t},e.createResultsUlElement=function(){var e=document.createElement("ul");return e.classList.add("darkflex__commands"),e},e.createResultLiElement=function(e){var t=document.createElement("li");return t.classList.add("darkflex__command"),t.innerHTML='<span class="darkflex__command-title">'+e.title+"</span>",t},e.prototype.setGroups=function(e){this.removeAllGroups();for(var t=0,n=e;t<n.length;t++){var o=n[t];this.addGroup(o)}},e.prototype.addGroup=function(t){for(var n=this,o=e.createGroupLiElement(t),r=e.createResultsUlElement(),i=0,s=t.filteredCommands;i<s.length;i++){var u=s[i];!function(t){var o=e.createResultLiElement(t);t.element=o,o.addEventListener("mouseover",function(e){for(var o=0,r=n.selectSubscribers;o<r.length;o++){(0,r[o])(t)}}),r.appendChild(o)}(u)}o.appendChild(r),this.groupsUlElement.appendChild(o)},e.prototype.removeAllGroups=function(){this.groupsUlElement.innerHTML=""},e.prototype.openMenu=function(){var e=this;this.menuElement.classList.add("darkflex--open"),document.addEventListener("keydown",this.onKeydown.bind(this));for(var t=0,n=this.openSubscribers;t<n.length;t++){(0,n[t])()}setTimeout(function(){return e.inputElement.focus()},0)},e.prototype.closeMenu=function(){this.menuElement.classList.remove("darkflex--open"),this.inputElement.value="",document.removeEventListener("keydown",this.onKeydown)},e.prototype.openMenuIfNoActiveInputs=function(){return document.activeElement===document.body?this.openMenu():!r.find(function(e){return document.activeElement instanceof e})?this.openMenu():void 0},e.prototype.selectCommand=function(e){e.element.classList.add("darkflex__command--selected")},e.prototype.deselectCommand=function(e){e.element.classList.remove("darkflex__command--selected")},e.prototype.onKeydown=function(e){"Escape"===e.key&&this.closeMenu()},e.prototype.onInput=function(e){this.inputSubscribers.push(e)},e.prototype.onOpen=function(e){this.openSubscribers.push(e)},e.prototype.onSelect=function(e){this.selectSubscribers.push(e)},e.prototype.onRun=function(e){this.runSubscribers.push(e)},e.prototype.emitRun=function(){for(var e=0,t=this.runSubscribers;e<t.length;e++){(0,t[e])()}},e.prototype.dotEventListener=function(e){"."===e.key&&this.openMenuIfNoActiveInputs()},e}(),s=new i,u=function(){function e(){this.commandGroups=[],this.maxResultsPerGroup=10}return e.prototype.registerCommandGroup=function(e){this.commandGroups.push(e)},e.prototype.unregisterCommandGroup=function(e){this.commandGroups=this.commandGroups.filter(function(t){return t!==e})},e.prototype.setFilter=function(e){for(var t=0,n=this.commandGroups;t<n.length;t++){n[t].setFilter(e)}s.setGroups(this.filteredCommandGroups)},e.prototype.useDotEventListener=function(){var e=this;document.addEventListener("keydown",function(e){return s.dotEventListener(e)}),s.onOpen(function(){if(0!==e.filteredCommands.length){s.setGroups(e.filteredCommandGroups);var t=e.filteredCommands[0];e.selectCommand(t)}}),s.onInput(function(t){e.setFilter(t);var n=e.filteredCommands[0];e.selectCommand(n)}),s.onRun(function(){e.selectedCommand&&e.selectedCommand.run()}),s.onSelect(function(t){e.selectCommand(t)})},e.prototype.selectCommand=function(e){this.selectedCommand&&this.deselectCommand(this.selectedCommand),this.selectedCommand=e,e&&(e.onSelect&&e.onSelect(),s.selectCommand(e))},e.prototype.deselectCommand=function(e){e&&(e.onDeselect&&e.onDeselect(),s.deselectCommand(e))},e.prototype.selectNextFilteredCommand=function(){var e=this.filteredCommands.indexOf(this.selectedCommand)+1;e>=this.filteredCommands.length&&(e=0),this.selectCommand(this.filteredCommands[e])},e.prototype.selectPrevFilteredCommand=function(){var e=this.filteredCommands.indexOf(this.selectedCommand)-1;e<0&&(e=this.filteredCommands.length-1),this.selectCommand(this.filteredCommands[e])},Object.defineProperty(e.prototype,"availableCommandGroups",{get:function(){return this.commandGroups.filter(function(e){return e.isAvailable()}).sort(function(e,t){return t.weight-e.weight})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCommands",{get:function(){return this.filteredCommandGroups.reduce(function(e,t){return e.concat(t.filteredCommands)},[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCommandGroups",{get:function(){return this.availableCommandGroups.filter(function(e){return e.filteredCommands.length>0})},enumerable:!0,configurable:!0}),e}(),c=new u,l=function(){function e(e){var t=e.title,n=e.weight,o=void 0===n?0:n,r=e.isAvailable,i=void 0===r?void 0:r;this.commands=[],this.filter="",this.title=t,this.weight=o,this.isAvailable=i||this.isAvailable}return e.prototype.setFilter=function(e){this.filter=e},e.prototype.isAvailable=function(){return this.availableCommands.length>0},e.prototype.isAvailableInContext=function(){return!0},e.prototype.registerCommand=function(e){e instanceof o||(e=new o(e)),this.commands.push(e)},Object.defineProperty(e.prototype,"availableCommands",{get:function(){return this.commands.filter(function(e){return e.isAvailable()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCommands",{get:function(){var e=this;return this.availableCommands.filter(function(t){return t.matches(e.filter)}).slice(0,c.maxResultsPerGroup)},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e){var t=e.element,n=e.event;"string"==typeof t&&(t=document.querySelector(t)),this.element=t,this.event=n}return e.prototype.run=function(){var e=new Event(this.event);this.element.dispatchEvent(e)},e.prototype.addFocus=function(){this.element.classList.add("darkflex__focused-event-target")},e.prototype.removeFocus=function(){this.element.classList.remove("darkflex__focused-event-target")},e.createClickEventStep=function(t){return new e({element:t,event:"click"})},e}(),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(e){function t(t){var n=t.title,o=t.description,r=t.domEventSteps,i=e.call(this,{title:n,description:o,run:function(){}})||this;return i.domEventSteps=[],r&&(i.domEventSteps=i.domEventSteps.concat(r)),i}return d(t,e),t.prototype.registerDOMEventStep=function(e){this.domEventSteps.push(e)},t.prototype.run=function(){for(var e=0,t=this.domEventSteps;e<t.length;e++){t[e].run()}},t.prototype.onSelect=function(){for(var e=0,t=this.domEventSteps;e<t.length;e++){t[e].addFocus()}},t.prototype.onDeselect=function(){for(var e=0,t=this.domEventSteps;e<t.length;e++){t[e].removeFocus()}},t.createClickEventCommand=function(e){var n=e.title,o=e.description,r=e.element,i=new t({title:n,description:o});return i.registerDOMEventStep(a.createClickEventStep(r)),i},t}(o);n.d(t,"Command",function(){return o}),n.d(t,"CommandGroup",function(){return l}),n.d(t,"CommandRegistry",function(){return u}),n.d(t,"commandRegistry",function(){return c}),n.d(t,"DOMEventsCommand",function(){return m}),n.d(t,"DOMEventStep",function(){return a}),n.d(t,"UI",function(){return i}),n.d(t,"ui",function(){return s})},function(e,t){}])});